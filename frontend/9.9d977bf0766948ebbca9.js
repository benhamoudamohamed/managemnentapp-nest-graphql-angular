(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"27w/":function(n,t,e){"use strict";e.r(t),e.d(t,"UnitModule",function(){return K});var i=e("SVse"),a=e("iInd"),o=e("s7LF"),c=e("7B+B"),r=e("OF/d"),s=e("p46w"),b=e.n(s),d=e("LetT"),l=e("8Y7J"),u=e("nbgS"),p=e("tKwJ");function h(n,t){if(1&n&&(l.Tb(0,"nb-option",13),l.yc(1),l.Sb()),2&n){const n=t.$implicit,e=t.index;l.ic("value",n.id||e),l.Bb(1),l.zc(n.name)}}function g(n,t){1&n&&(l.Tb(0,"span"),l.yc(1,"Save"),l.Sb())}function m(n,t){if(1&n&&(l.Tb(0,"span",14),l.yc(1,"Loading..."),l.Sb()),2&n){const n=l.cc();l.ic("nbSpinner",n.loadingSpinner)}}let f=(()=>{class n{constructor(n,t,e,i){this.apollo=n,this.router=t,this.route=e,this.formBuilder=i,this.unit={id:"",name:"",company:""},this.id="",this.name="",this.company="",this.submitted=!1,this.loadingSpinner=!1}ngOnInit(){this.selectedCompany=b.a.get("companyId"),this.getCompanies(),this.form=this.formBuilder.group({name:["",[o.q.required,d.a]],company:[this.selectedCompany,[o.q.required]]}),this.form.setValue({name:"",company:this.selectedCompany});const n=this.route.snapshot.params.id;void 0!==n?(this.title="Update Unit",this.query=this.apollo.watchQuery({query:r.a,variables:{unitId:n}}).valueChanges.subscribe(n=>{this.unit=n.data.unit,this.id=this.unit.id,this.form.setValue({name:this.unit.name,company:this.selectedCompany})})):this.title="Create Unit",this.form.setValue({name:"",company:this.selectedCompany})}get f(){return this.form.controls}onChange(n){this.selectedCompany=n}onSubmit(){void 0!==this.route.snapshot.params.id?this.update():this.create()}create(){this.submitted=!0;const n=this.form.value;this.loadingSpinner=!0,this.apollo.mutate({mutation:r.c,variables:{name:n.name,company:n.company}}).subscribe(({})=>{this.loadingSpinner=!1,this.submitted=!1,this.router.navigate(["/units"])},n=>{this.loadingSpinner=!1,this.queryError="Unit Name already exist"})}update(){this.submitted=!0;const n=this.form.value;this.loadingSpinner=!0,this.apollo.mutate({mutation:r.d,variables:{id:this.id,name:n.name,company:n.company}}).subscribe(({})=>{this.loadingSpinner=!1,this.submitted=!1,this.router.navigate(["/units"])},n=>{this.loadingSpinner=!1,this.queryError="Unit Name already exist"})}getCompanies(){this.query=this.apollo.watchQuery({query:c.a}).valueChanges.subscribe(n=>{this.companies=n.data&&n.data.companies},n=>{console.log(n)})}ngOnDestroy(){this.query.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(l.Nb(u.b),l.Nb(a.c),l.Nb(a.a),l.Nb(o.b))},n.\u0275cmp=l.Hb({type:n,selectors:[["app-unit-edit"]],decls:19,vars:9,consts:[[1,"centerElement"],[1,"titlecenter"],["novalidate","",3,"formGroup","ngSubmit"],[1,"topMargin"],["nbInput","","fullWidth","","shape","round","required","","id","name","type","text","formControlName","name",1,"full-width"],["for","name"],["aria-hidden","true"],[1,"invalid-feedback"],["shape","round","filled","","status","info","formControlName","company","name","companies",1,"hidden",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],["nbSpinnerSize","medium","nbSpinnerStatus","danger","nbButton","","shape","round","size","medium","status","success","type","submit",3,"nbSpinner","disabled"],[4,"ngIf"],[3,"nbSpinner",4,"ngIf"],[3,"value"],[3,"nbSpinner"]],template:function(n,t){1&n&&(l.Tb(0,"div",0),l.Tb(1,"h3",1),l.yc(2),l.Sb(),l.Tb(3,"form",2),l.ac("ngSubmit",function(){return t.onSubmit()}),l.Tb(4,"div",3),l.Ob(5,"input",4),l.Tb(6,"label",5),l.yc(7,"Unit Name "),l.Tb(8,"span",6),l.yc(9,"*"),l.Sb(),l.Sb(),l.Tb(10,"div",7),l.Tb(11,"span"),l.yc(12),l.Sb(),l.Sb(),l.Sb(),l.Tb(13,"div",3),l.Tb(14,"nb-select",8),l.ac("selectedChange",function(n){return t.selectedCompany=n})("selectedChange",function(n){return t.onChange(n)}),l.wc(15,h,2,2,"nb-option",9),l.Sb(),l.Sb(),l.Tb(16,"button",10),l.wc(17,g,2,0,"span",11),l.wc(18,m,2,1,"span",12),l.Sb(),l.Sb(),l.Sb()),2&n&&(l.Bb(2),l.zc(t.title),l.Bb(1),l.ic("formGroup",t.form),l.Bb(9),l.Ac(" ",t.queryError," "),l.Bb(2),l.ic("selected",t.selectedCompany),l.Bb(1),l.ic("ngForOf",t.companies),l.Bb(1),l.ic("nbSpinner",t.loadingSpinner)("disabled",t.form.invalid),l.Bb(1),l.ic("ngIf",!1===t.loadingSpinner),l.Bb(1),l.ic("ngIf",!0===t.loadingSpinner))},directives:[o.s,o.i,o.d,p.q,o.a,o.o,o.h,o.c,p.B,i.n,p.c,p.G,i.o,p.A],styles:["full-width[_ngcontent-%COMP%]{width:90%}.centerElement[_ngcontent-%COMP%]{margin:0 25%;width:50%}label[_ngcontent-%COMP%]{margin:0 3%}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{direction:ltr;text-align:left}input[_ngcontent-%COMP%]{margin:1% 0}.titlecenter[_ngcontent-%COMP%]{text-align:center;margin:5% 20%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;justify-content:center;margin:3% 40%}.invalid-feedback[_ngcontent-%COMP%]{text-align:left;margin:2% 0 2% 2%}.hidden[_ngcontent-%COMP%]{display:none!important}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{position:relative;width:100%}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:inline-block}label[_ngcontent-%COMP%]{margin:0 15px;padding:0 0 5px;top:-37px;transition:all .5s ease-in-out;z-index:1}input[type][_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], input[type][_ngcontent-%COMP%]:valid + label[_ngcontent-%COMP%]{top:-70px;font-size:.8em}"]}),n})();var y=e("Mpyp");function S(n,t){1&n&&l.Ob(0,"app-spinner")}const C=function(n){return["/units/edit/",n]};function w(n,t){if(1&n){const n=l.Ub();l.Tb(0,"nb-card"),l.Tb(1,"nb-card-header"),l.Tb(2,"h3"),l.yc(3),l.Sb(),l.Sb(),l.Tb(4,"nb-card-body"),l.Tb(5,"table",2),l.Tb(6,"tr"),l.Tb(7,"th"),l.yc(8,"Unit Name"),l.Sb(),l.Tb(9,"th"),l.yc(10,"Created Date"),l.Sb(),l.Sb(),l.Tb(11,"tr"),l.Tb(12,"td"),l.yc(13),l.Sb(),l.Tb(14,"td"),l.yc(15),l.dc(16,"date"),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(17,"nb-card-footer"),l.Tb(18,"button",3),l.Ob(19,"nb-icon",4),l.Sb(),l.Tb(20,"button",5),l.ac("click",function(){l.pc(n);const t=l.cc();return t.delete(t.unit.id)}),l.Ob(21,"nb-icon",6),l.Sb(),l.Sb(),l.Sb()}if(2&n){const n=l.cc();l.Bb(3),l.zc(n.unit.name),l.Bb(10),l.zc(n.unit.name),l.Bb(2),l.zc(l.ec(16,4,n.unit.created)),l.Bb(3),l.ic("routerLink",l.lc(6,C,n.unit.id))}}let O=(()=>{class n{constructor(n,t,e,i){this.apollo=n,this.router=t,this.route=e,this.dialogService=i,this.loadingSpinner=!1,this.unit={id:"",name:"",created:""}}ngOnInit(){this.getUnit()}getUnit(){this.loadingSpinner=!0,this.query=this.apollo.watchQuery({query:r.a,variables:{unitId:this.route.snapshot.params.id}}).valueChanges.subscribe(n=>{this.unit=n.data.unit,this.loadingSpinner=!1})}delete(n){this.apollo.mutate({mutation:r.e,variables:{id:this.route.snapshot.params.id}}).subscribe(({})=>{this.router.navigate(["/units"])},n=>{console.log("there was an error sending the query",n)})}ngOnDestroy(){this.query.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(l.Nb(u.b),l.Nb(a.c),l.Nb(a.a),l.Nb(p.m))},n.\u0275cmp=l.Hb({type:n,selectors:[["app-unit"]],decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngIfUnit","ngIf"],[1,"tableStyle"],["nbButton","","shape","rectangle","outline","","status","success","size","large",3,"routerLink"],["icon","edit-2-outline"],["nbButton","","shape","rectangle","outline","","status","success","size","large",3,"click"],["icon","trash-2-outline"]],template:function(n,t){1&n&&(l.wc(0,S,1,0,"app-spinner",0),l.wc(1,w,22,8,"nb-card",1)),2&n&&(l.ic("ngIf",!0===t.loadingSpinner),l.Bb(1),l.ic("ngIf",!1===t.loadingSpinner))},directives:[i.o,y.a,p.h,p.j,p.g,p.i,p.c,a.d,p.n],pipes:[i.e],styles:["nb-card[_ngcontent-%COMP%]{text-align:center;justify-content:center;margin:5% 10%;width:80%}img[_ngcontent-%COMP%]{margin:0;width:100%;height:300px}.tableStyle[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.tableStyle[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .tableStyle[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}.tableStyle[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px;text-align:center;color:#fffaf0}nb-card-footer[_ngcontent-%COMP%]{justify-content:start;width:100%}button[_ngcontent-%COMP%]{text-align:center;width:30%}"]}),n})();var T=e("clcC"),M=e("cZdB");function P(n,t){1&n&&l.Ob(0,"app-spinner")}function _(n,t){1&n&&(l.Tb(0,"h2"),l.yc(1,"No units yet"),l.Sb())}function v(n,t){1&n&&l.Ob(0,"tr",17)}function B(n,t){1&n&&l.Ob(0,"tr",18)}function I(n,t){1&n&&(l.Tb(0,"th",19),l.yc(1,"ID"),l.Sb())}function x(n,t){if(1&n&&(l.Tb(0,"td",20),l.yc(1),l.Sb()),2&n){const n=t.index;l.Bb(1),l.zc(n+1)}}function D(n,t){1&n&&(l.Tb(0,"th",19),l.yc(1,"Name"),l.Sb())}function G(n,t){if(1&n&&(l.Tb(0,"td",20),l.yc(1),l.Sb()),2&n){const n=t.$implicit;l.Bb(1),l.zc(n.name||"-")}}function q(n,t){1&n&&(l.Tb(0,"th",19),l.yc(1,"Details"),l.Sb())}const U=function(n){return["/units/detail/",n]};function k(n,t){1&n&&(l.Tb(0,"td",21),l.Ob(1,"nb-icon",22),l.Sb()),2&n&&l.ic("routerLink",l.lc(1,U,t.$implicit.id))}const N=function(){return["/units/create"]};function z(n,t){if(1&n){const n=l.Ub();l.Tb(0,"nb-card",2),l.Tb(1,"nb-card-body"),l.Tb(2,"div",3),l.Tb(3,"input",4),l.ac("ngModelChange",function(t){return l.pc(n),l.cc(2).searchedKeyword=t}),l.Sb(),l.Tb(4,"button",5),l.Ob(5,"nb-icon",6),l.Sb(),l.Sb(),l.Tb(6,"table",7),l.dc(7,"filter"),l.wc(8,v,1,0,"tr",8),l.wc(9,B,1,0,"tr",9),l.Rb(10,10),l.wc(11,I,2,0,"th",11),l.wc(12,x,2,1,"td",12),l.Qb(),l.Rb(13,13),l.wc(14,D,2,0,"th",11),l.wc(15,G,2,1,"td",12),l.Qb(),l.Rb(16,14),l.wc(17,q,2,0,"th",11),l.wc(18,k,2,3,"td",15),l.Qb(),l.Sb(),l.Sb(),l.Tb(19,"nb-card-footer"),l.Tb(20,"app-pagination",16),l.ac("changePage",function(t){return l.pc(n),l.cc(2).onChangePage(t)}),l.Sb(),l.Sb(),l.Sb()}if(2&n){const n=l.cc(2);l.Bb(3),l.ic("ngModel",n.searchedKeyword),l.Bb(1),l.ic("routerLink",l.kc(10,N)),l.Bb(2),l.ic("nbTreeGrid",n.tableDataSource)("dataSource",l.fc(7,7,n.tableDataSource,n.searchedKeyword)),l.Bb(2),l.ic("nbTreeGridHeaderRowDef",n.columnsItems),l.Bb(1),l.ic("nbTreeGridRowDefColumns",n.columnsItems),l.Bb(11),l.ic("items",n.itemsPagination)}}function L(n,t){if(1&n&&(l.Tb(0,"div"),l.wc(1,_,2,0,"h2",0),l.wc(2,z,21,11,"nb-card",1),l.Sb()),2&n){const n=l.cc();l.Bb(1),l.ic("ngIf",0===n.tableDataSource),l.Bb(1),l.ic("ngIf",0!==n.tableDataSource)}}const R=[{path:"units",component:(()=>{class n{constructor(n){this.apollo=n,this.loadingSpinner=!1,this.columnsItems=["id","name","view"],this.itemsPagination=[],this.companyId=b.a.get("companyId")}ngOnInit(){this.getUnits(),this.refreshData()}refreshData(){this.apollo.watchQuery({query:r.b,variables:{unitId:this.companyId}}).refetch()}getUnits(){this.loadingSpinner=!0,this.query=this.apollo.watchQuery({query:r.b,variables:{unitId:this.companyId}}).valueChanges.subscribe(n=>{this.tableDataSource=n.data&&n.data.findUnitByCompany,this.itemsPagination=n.data&&n.data.findUnitByCompany,this.loadingSpinner=!1})}onChangePage(n){this.tableDataSource=n}ngOnDestroy(){this.query.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(l.Nb(u.b))},n.\u0275cmp=l.Hb({type:n,selectors:[["app-units"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","tableStyle",4,"ngIf"],[1,"tableStyle"],[1,"table-header"],["nbInput","","placeholder","Search...","id","search",1,"search-input",3,"ngModel","ngModelChange"],["nbButton","","shape","semi-round","outline","","status","success","size","large",3,"routerLink"],["icon","plus-square-outline"],[3,"nbTreeGrid","dataSource"],["nbTreeGridHeaderRow","",4,"nbTreeGridHeaderRowDef"],["nbTreeGridRow","",4,"nbTreeGridRowDef","nbTreeGridRowDefColumns"],["nbTreeGridColumnDef","id"],["nbTreeGridHeaderCell","",4,"nbTreeGridHeaderCellDef"],["nbTreeGridCell","",4,"nbTreeGridCellDef"],["nbTreeGridColumnDef","name"],["nbTreeGridColumnDef","view"],["nbTreeGridCell","",3,"routerLink",4,"nbTreeGridCellDef"],[3,"items","changePage"],["nbTreeGridHeaderRow",""],["nbTreeGridRow",""],["nbTreeGridHeaderCell",""],["nbTreeGridCell",""],["nbTreeGridCell","",3,"routerLink"],["icon","eye-outline"]],template:function(n,t){1&n&&(l.wc(0,P,1,0,"app-spinner",0),l.wc(1,L,3,2,"div",0)),2&n&&(l.ic("ngIf",!0===t.loadingSpinner),l.Bb(1),l.ic("ngIf",!1===t.loadingSpinner))},directives:[i.o,y.a,p.h,p.g,p.q,o.a,o.h,o.k,p.c,a.d,p.n,p.U,p.Y,p.bb,p.T,p.V,p.R,p.i,T.a,p.X,p.ab,p.W,p.S],pipes:[M.a],styles:['h2[_ngcontent-%COMP%]{text-align:center;margin-top:5%}.tableStyle[_ngcontent-%COMP%]{width:80%;margin:5% 10%}.table-header[_ngcontent-%COMP%]{margin:2% 0}.table-header[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.table-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{float:left;width:25%}.table-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{float:right;width:25%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center;color:#fffaf0;border-color:#faebd7}.nb-column-name[_ngcontent-%COMP%]{width:100%}@media screen and (min-width:400px){.nb-column-id[_ngcontent-%COMP%], .nb-column-name[_ngcontent-%COMP%], .nb-column-view[_ngcontent-%COMP%]{width:33%}}@media screen and (min-width:700px){.nb-column-name[_ngcontent-%COMP%]{width:50%}.nb-column-id[_ngcontent-%COMP%], .nb-column-view[_ngcontent-%COMP%]{width:10%}}']}),n})(),data:{title:"List of Unit"}},{path:"units/detail/:id",component:O,data:{title:"Unit Details"}},{path:"units/create",component:f,data:{title:"Add Unit"}},{path:"units/edit/:id",component:f,data:{title:"Edit Unit"}}];let H=(()=>{class n{}return n.\u0275mod=l.Lb({type:n}),n.\u0275inj=l.Kb({factory:function(t){return new(t||n)},imports:[[a.g.forChild(R)],a.g]}),n})();var Q=e("kg2i"),j=e("iL26"),E=e("/R+O");let K=(()=>{class n{}return n.\u0275mod=l.Lb({type:n}),n.\u0275inj=l.Kb({factory:function(t){return new(t||n)},imports:[[i.c,H,o.e,o.n,Q.a,j.a,E.a]]}),n})()}}]);